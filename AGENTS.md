# CLAUDE.md

æœ¬æ–‡ä»¶ä¸º Claude Code (claude.ai/code) åœ¨æ­¤ä»£ç åº“ä¸­å·¥ä½œæ—¶æä¾›æŒ‡å¯¼ã€‚

## æ„å»ºå‘½ä»¤

```bash
npm install              # å®‰è£…ä¾èµ–
npm run dev             # å¼€å‘æ„å»ºï¼Œæ”¯æŒçƒ­é‡è½½
npm run build           # ç”Ÿäº§æ„å»ºï¼ˆè¿è¡Œ tsc + esbuildï¼‰
```

**é‡è¦**ï¼šæ„å»ºå®Œæˆåï¼Œéœ€å°† `main.js`ã€`manifest.json` å’Œ `styles.css` å¤åˆ¶åˆ° `<Vault>/.obsidian/plugins/obsidian-gantt-calendar/`ï¼Œç„¶åé‡æ–°åŠ è½½ Obsidian è¿›è¡Œæµ‹è¯•ã€‚

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ª Obsidian æ’ä»¶ï¼Œæä¾›å¸¦æœ‰ç”˜ç‰¹å›¾åŠŸèƒ½çš„æ—¥å†è§†å›¾å’Œä»»åŠ¡ç®¡ç†ã€‚æ”¯æŒ Tasks æ’ä»¶ï¼ˆemoji æ ¼å¼ï¼‰å’Œ Dataview æ’ä»¶ï¼ˆfield æ ¼å¼ï¼‰ä¸¤ç§ä»»åŠ¡æ ¼å¼ã€‚

## æ¶æ„

### å…¥å£ç‚¹
- `main.ts` - æ’ä»¶ç”Ÿå‘½å‘¨æœŸï¼ˆonload/onunloadï¼‰ï¼Œæ³¨å†Œè§†å›¾ã€å‘½ä»¤å’Œäº‹ä»¶ç›‘å¬å™¨
- `GCMainView.ts` - ä¸»è§†å›¾å®¹å™¨ï¼Œç®¡ç†æ‰€æœ‰å­è§†å›¾

### è§†å›¾ç³»ç»Ÿ
æ’ä»¶ä½¿ç”¨åŸºç±»æ¨¡å¼æ„å»ºè§†å›¾ï¼š
- `BaseViewRenderer` - æ‰€æœ‰è§†å›¾çš„å…±äº«æ–¹æ³•ï¼ˆä»»åŠ¡æ¸²æŸ“ã€å·¥å…·æç¤ºã€é“¾æ¥è§£æï¼‰
- å„è§†å›¾ç»§æ‰¿æ­¤åŸºç±»ï¼š`YearView`ã€`MonthView`ã€`WeekView`ã€`DayView`ã€`TaskView`ã€`GanttView`

### å·¥å…·æ ç³»ç»Ÿ
`src/toolbar/` ä¸­çš„ä¸‰åŒºåŸŸå¸ƒå±€ï¼š
- **å·¦ä¾§**ï¼šè§†å›¾åˆ‡æ¢ï¼ˆæ—¥å† â†” ä»»åŠ¡ï¼‰
- **ä¸­é—´**ï¼šæ—¥æœŸèŒƒå›´/æ ‡é¢˜æ˜¾ç¤º
- **å³ä¾§**ï¼šå¯¼èˆªæŒ‰é’®ï¼ˆå› è§†å›¾è€Œå¼‚ï¼‰

### ä»»åŠ¡ç®¡ç†
- `src/tasks/taskParser.ts` - è§£æ Tasksï¼ˆemojiï¼‰å’Œ Dataviewï¼ˆfieldï¼‰æ ¼å¼
- `src/tasks/taskSearch.ts` - æŒ‰æ—¥æœŸ/çŠ¶æ€è¿‡æ»¤ä»»åŠ¡
- `src/data-layer` - è´Ÿè´£ä»»åŠ¡ç¼“å­˜çš„ç®¡ç†

### ä»»åŠ¡æ ¼å¼å…¼å®¹æ€§

**Tasks æ ¼å¼ï¼ˆemojiï¼‰**ï¼š
```
- [x] ğŸ¯  ä»»åŠ¡å…¨æ ¼å¼ ğŸ”º ğŸ” every day â• 2026-01-15 ğŸ›« 2026-01-19 â³ 2026-01-17 ğŸ“… 2026-01-21 âœ… 2026-01-15
```

**Dataview æ ¼å¼ï¼ˆfieldï¼‰**ï¼š
```
- [x] ğŸ¯  dataviewä»»åŠ¡æ ¼å¼  [priority:: highest]  [repeat:: every day]  [created:: 2026-01-15]  [start:: 2026-01-16]  [scheduled:: 2026-01-16]  [due:: 2026-01-15]  [completion:: 2026-01-15]
```

ä¼˜å…ˆçº§ï¼š`ğŸ”º`ï¼ˆæœ€é«˜ï¼‰ã€`â«`ï¼ˆé«˜ï¼‰ã€`ğŸ”¼`ï¼ˆä¸­ï¼‰ã€`ğŸ”½`ï¼ˆä½ï¼‰ã€`â¬`ï¼ˆæœ€ä½ï¼‰
æ—¥æœŸ emojiï¼š`â•`ï¼ˆåˆ›å»ºæ—¥æœŸï¼‰ã€`ğŸ›«`ï¼ˆå¼€å§‹æ—¥æœŸï¼‰ã€`â³`ï¼ˆè®¡åˆ’æ—¥æœŸï¼‰ã€`ğŸ“…`ï¼ˆåˆ°æœŸæ—¥æœŸï¼‰ã€`âœ…`ï¼ˆå®Œæˆæ—¥æœŸï¼‰ã€`âŒ`ï¼ˆå–æ¶ˆæ—¥æœŸï¼‰
é‡å¤ä»»åŠ¡: `ğŸ”` every day

## ä»£ç ç»Ÿä¸€ç®¡ç†è§„èŒƒ
DOMç±»åç»Ÿä¸€ä½¿ç”¨ ./src/utils/bem.ts è¿›è¡Œç®¡ç†, æ–°å»ºç±»åéœ€åœ¨æ­¤æ–‡ä»¶ä¸­è¿›è¡Œå®šä¹‰å¹¶å¼•ç”¨
ä¿®æ”¹DOMç»“æ„æˆ–è€…æ ·å¼ä¹‹å‰,è¯·å…ˆæ£€æŸ¥æ˜¯å¦æœ‰ç›¸å…³çš„æ—§ç±»æœªç§»é™¤,ç§»é™¤æœªä½¿ç”¨çš„æ—§ç±».
æ­£åˆ™è¡¨è¾¾å¼ç»Ÿä¸€ä½¿ç”¨ ./src/utils/RegularExpression.ts è¿›è¡Œç®¡ç†.
å…¨å±€ä»»åŠ¡æ‚¬æµ®çª—ç»Ÿä¸€å¤ç”¨ ./src/utils/tooltipManager.ts
ä»»åŠ¡æ¡ç›®æ›´æ–°ç»Ÿä¸€å¤ç”¨ updateTaskPropertieså‡½æ•°è¿›è¡Œ.

## Git æäº¤è§„èŒƒ

**é‡è¦è§„åˆ™**ï¼š
- âŒ **ç¦æ­¢è‡ªåŠ¨æäº¤**ï¼šå®Œæˆä»£ç ä¿®æ”¹åï¼Œä¸è¦è‡ªåŠ¨æ‰§è¡Œ `git commit` æˆ– `git push`
- âœ… **ç­‰å¾…ç”¨æˆ·æŒ‡ç¤º**ï¼šä»…å½“ç”¨æˆ·æ˜ç¡®è¦æ±‚æäº¤æ—¶ï¼Œæ‰æ‰§è¡Œ Git æäº¤æ“ä½œ
- âœ… **å¯ä»¥è¿è¡Œæ„å»º**ï¼šä¿®æ”¹ä»£ç åå¯ä»¥è¿è¡Œ `npm run build` è¿›è¡ŒéªŒè¯
- âœ… **å¯ä»¥æŸ¥çœ‹çŠ¶æ€**ï¼šå¯ä»¥ä½¿ç”¨ `git status`ã€`git diff` ç­‰å‘½ä»¤æŸ¥çœ‹ä¿®æ”¹çŠ¶æ€

## Windows ç‰¹æ®Šæ–‡ä»¶åæ³¨æ„äº‹é¡¹

**é¿å…åˆ›å»ºä¿ç•™è®¾å¤‡åæ–‡ä»¶**ï¼š

åœ¨ Windows ç¯å¢ƒä¸‹ï¼Œä»¥ä¸‹åç§°æ˜¯ç³»ç»Ÿä¿ç•™çš„è®¾å¤‡åï¼Œä¸åº”ä½œä¸ºæ–‡ä»¶åä½¿ç”¨ï¼š
- `NUL` - ç©ºè®¾å¤‡
- `CON` - æ§åˆ¶å°
- `PRN` - æ‰“å°æœº
- `AUX` - è¾…åŠ©è®¾å¤‡
- `COM1-9` - ä¸²å£
- `LPT1-9` - å¹¶å£

**é—®é¢˜åŸå› **ï¼š
åœ¨ Git Bash ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ `2>nul` æˆ–ç±»ä¼¼çš„è¾“å‡ºé‡å®šå‘è¯­æ³•æ—¶ï¼Œå¯èƒ½ä¼šæ„å¤–åˆ›å»ºåä¸º `nul` çš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯é‡å®šå‘åˆ°ç©ºè®¾å¤‡ã€‚

**é¿å…æ–¹å¼**ï¼š
```bash
# âŒ é”™è¯¯ï¼šå¯èƒ½åœ¨ Windows Git Bash ä¸­åˆ›å»º nul æ–‡ä»¶
dir "path" 2>nul | findstr "pattern"

# âœ… æ­£ç¡®ï¼šä½¿ç”¨ /dev/nullï¼ˆGit Bash å…¼å®¹ï¼‰
dir "path" 2>/dev/null | findstr "pattern"

# âœ… æ­£ç¡®ï¼šç›´æ¥ä½¿ç”¨ Bash åŸç”Ÿå‘½ä»¤
find "path" -name "*pattern*"

# âœ… æ­£ç¡®ï¼šä½¿ç”¨ Glob å·¥å…·ä»£æ›¿ bash å‘½ä»¤
```

**å¦‚æœæ„å¤–åˆ›å»ºäº†æ­¤ç±»æ–‡ä»¶**ï¼š
```bash
# ä½¿ç”¨ Git Bash çš„ rm å‘½ä»¤åˆ é™¤
rm -f nul
```
