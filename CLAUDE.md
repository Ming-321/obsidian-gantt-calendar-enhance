# CLAUDE.md

æœ¬æ–‡ä»¶ä¸º Claude Code (claude.ai/code) åœ¨æ­¤ä»£ç åº“ä¸­å·¥ä½œæ—¶æä¾›æŒ‡å¯¼ã€‚

## æ„å»ºå‘½ä»¤

```bash
npm install              # å®‰è£…ä¾èµ–
npm run dev             # å¼€å‘æ„å»ºï¼Œæ”¯æŒçƒ­é‡è½½
npm run build           # ç”Ÿäº§æ„å»ºï¼ˆè¿è¡Œ tsc + esbuildï¼‰
```

**é‡è¦**ï¼šæ„å»ºå®Œæˆåï¼Œéœ€å°† `main.js`ã€`manifest.json` å’Œ `styles.css` å¤åˆ¶åˆ° `<Vault>/.obsidian/plugins/obsidian-gantt-calendar/`ï¼Œç„¶åé‡æ–°åŠ è½½ Obsidian è¿›è¡Œæµ‹è¯•ã€‚

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ª Obsidian æ’ä»¶ï¼Œæä¾›å¸¦æœ‰ç”˜ç‰¹å›¾åŠŸèƒ½çš„æ—¥å†è§†å›¾å’Œä»»åŠ¡ç®¡ç†ã€‚æ”¯æŒ Tasks æ’ä»¶ï¼ˆemoji æ ¼å¼ï¼‰å’Œ Dataview æ’ä»¶ï¼ˆfield æ ¼å¼ï¼‰ä¸¤ç§ä»»åŠ¡æ ¼å¼ã€‚

## æ¶æ„

### å…¥å£ç‚¹
- `main.ts` - æ’ä»¶ç”Ÿå‘½å‘¨æœŸï¼ˆonload/onunloadï¼‰ï¼Œæ³¨å†Œè§†å›¾ã€å‘½ä»¤å’Œäº‹ä»¶ç›‘å¬å™¨
- `GCMainView.ts` - ä¸»è§†å›¾å®¹å™¨ï¼Œç®¡ç†æ‰€æœ‰å­è§†å›¾

### è§†å›¾ç³»ç»Ÿ
æ’ä»¶ä½¿ç”¨åŸºç±»æ¨¡å¼æ„å»ºè§†å›¾ï¼š
- `BaseViewRenderer` - æ‰€æœ‰è§†å›¾çš„å…±äº«æ–¹æ³•ï¼ˆä»»åŠ¡æ¸²æŸ“ã€å·¥å…·æç¤ºã€é“¾æ¥è§£æï¼‰
- å„è§†å›¾ç»§æ‰¿æ­¤åŸºç±»ï¼š`MonthView`ã€`WeekView`ã€`TaskView`

è§†å›¾ç±»å‹å®šä¹‰ï¼š`CalendarViewType = 'month' | 'week' | 'task'`

#### å‘¨è§†å›¾ï¼ˆç”˜ç‰¹å›¾é£æ ¼ï¼‰
å‘¨è§†å›¾é‡‡ç”¨ç”˜ç‰¹å›¾å¸ƒå±€ï¼Œæ¯ä¸ªä»»åŠ¡æ˜¾ç¤ºä¸ºä¸€è¡Œæ¨ªå‘ barï¼š
- Headerï¼š7 åˆ—æ—¥æœŸå¤´ï¼ˆå‘¨å‡  + æ—¥æœŸæ•°å­—ï¼‰ï¼Œé«˜äº®ä»Šå¤©ï¼Œä¸æ˜¾ç¤ºå†œå†
- Bodyï¼šæ¯ä¸ªå¾…åŠå ç‹¬ç«‹ä¸€è¡Œï¼Œæé†’ç±»ä»»åŠ¡é€šè¿‡è´ªå¿ƒè£…ç®±åˆå¹¶åˆ°å…±äº«è¡Œ
- Bar é¢œè‰²æŒ‰ä¼˜å…ˆçº§åŒºåˆ†ï¼šçº¢è‰²=é«˜ã€è“è‰²=æ™®é€šã€ç°è‰²=ä½ã€æ©™è‰²è™šçº¿=æé†’ã€ç»¿è‰²=å·²å®Œæˆ
- äº¤äº’ï¼šhover æ˜¾ç¤º tooltipã€ç‚¹å‡»æ‰“å¼€ç¼–è¾‘å¼¹çª—ã€æ”¯æŒçŠ¶æ€/æ ‡ç­¾ç­›é€‰ã€å¾…åŠä»»åŠ¡æ˜¾ç¤ºå¯ç‚¹å‡»å¤é€‰æ¡†ï¼ˆå— `weekViewShowCheckbox` è®¾ç½®æ§åˆ¶ï¼‰
- æ ‡é¢˜æ ¼å¼ï¼š`ç¬¬Xå‘¨ (M.D-M.D)`ï¼Œæ”¯æŒé€šè¿‡ `semesterStartDates` å­¦æœŸèµ·å§‹æ—¥åˆ—è¡¨å®ç°è‡ªå®šä¹‰å‘¨æ•°ï¼ˆè‡ªåŠ¨é€‰æ‹©æœ€è¿‘çš„è¿‡å»æ—¥æœŸï¼‰
- åŠ¨æ€ 7 æ—¥æ¨¡å¼ï¼šé•¿æŒ‰æ ‡é¢˜è¿›å…¥ã€Œä»Šå¤©èµ·7å¤©ã€æ¨¡å¼ï¼ˆæ— ç¿»é¡µç®­å¤´ï¼‰ï¼Œå•å‡»æ ‡é¢˜åˆ‡å›æ ‡å‡†å‘¨

#### æœˆè§†å›¾
- å¾…åŠä»…åœ¨æˆªæ­¢æ—¥æœŸï¼ˆdueDateï¼‰å½“å¤©æ˜¾ç¤º
- æ— æˆªæ­¢æ—¥çš„å¾…åŠåœ¨å¼€å§‹æ—¥æœŸï¼ˆstartDateï¼‰å½“å¤©æ˜¾ç¤º
- æé†’ä»…åœ¨ dueDate å½“å¤©æ˜¾ç¤º
- å·²å®Œæˆä»»åŠ¡ä»…åœ¨å®Œæˆæ—¥å½“å¤©æ˜¾ç¤º
- æ—¥æ ¼å­å†…ä»»åŠ¡è¶…å‡ºæ—¶å¯æ»šåŠ¨æŸ¥çœ‹ï¼ˆéšè—æ»šåŠ¨æ¡ï¼Œé€šè¿‡é¼ æ ‡æ»šè½®/è§¦æ§æ¿æ»šåŠ¨ï¼‰
- ã€Œä»Šå¤©ã€æ ¼å­ä»…ä½¿ç”¨æµ…çº¢è‰²èƒŒæ™¯é«˜äº®ï¼Œä¸æ·»åŠ è¾¹æ¡†è‰²ï¼ˆé¿å…ä¸ç½‘æ ¼çº¿äº§ç”Ÿè§†è§‰å†²çªï¼‰

#### ä»»åŠ¡è§†å›¾
- ä»…æ˜¾ç¤ºæˆªæ­¢æ—¶é—´ï¼ˆä¸æ˜¾ç¤ºåˆ›å»ºã€å¼€å§‹ç­‰å…¶ä»–æ—¥æœŸï¼‰
- ä¸æ˜¾ç¤ºä»»åŠ¡ç±»å‹æ ‡ç­¾ï¼ˆå¾…åŠ/æé†’ï¼‰

### å·¥å…·æ ç³»ç»Ÿ
`src/toolbar/` ä¸­çš„ä¸‰åŒºåŸŸå¯¹ç§°å¸ƒå±€ï¼š
- **å·¦ä¾§** `toolbar-left.ts`ï¼šè§†å›¾åˆ‡æ¢æŒ‰é’®ç»„ [å‘¨ | æœˆ | ä»»åŠ¡]
- **ä¸­é—´** `toolbar-center.ts`ï¼šå¯¼èˆªç®­å¤´ + æ ‡é¢˜ï¼ˆâ—€ ç¬¬5å‘¨ (2.3-2.9) â–¶ï¼‰ï¼Œå•å‡»æ ‡é¢˜å›åˆ°ä»Šå¤©ï¼Œé•¿æŒ‰æ ‡é¢˜åˆ‡æ¢ rolling7 æ¨¡å¼ï¼Œä»»åŠ¡è§†å›¾å’Œ rolling7 æ¨¡å¼æ—¶éšè—ç®­å¤´
- **å³ä¾§** `toolbar-right.ts`ï¼šåŠŸèƒ½æŒ‰é’®ç»„ [ç­›é€‰ | é¢„è®¾ | æ–°å»º]ï¼Œä¸å·¦ä¾§è§†å›¾åˆ‡æ¢æŒ‰é’®ç»„è§†è§‰å¯¹ç§°
  - **ç­›é€‰**ï¼šå¼¹å‡ºè§†å›¾èœå•é¢æ¿ï¼ˆ`components/view-menu.ts`ï¼‰ï¼ŒåŒ…å«çŠ¶æ€ç­›é€‰ã€æ ‡ç­¾ç­›é€‰ã€æ’åºã€æ—¥æœŸèŒƒå›´
  - **é¢„è®¾**ï¼šå¿«æ·é¢„è®¾æŒ‰é’®ï¼ˆ`components/preset-button.ts`ï¼‰ï¼Œå•å‡»åº”ç”¨é»˜è®¤é¢„è®¾ï¼Œé•¿æŒ‰æ‰“å¼€é¢„è®¾é€‰æ‹©
  - **æ–°å»º**ï¼šæ‰“å¼€åˆ›å»ºä»»åŠ¡å¼¹çª—
- **å“åº”å¼** `toolbar-responsive.ts`ï¼šç´§å‡‘æ¨¡å¼ä¸‹éšè—æŒ‰é’®æ–‡å­—æ ‡ç­¾

### ä»»åŠ¡ç®¡ç†
- `src/tasks/taskParser.ts` - è§£æ Tasksï¼ˆemojiï¼‰å’Œ Dataviewï¼ˆfieldï¼‰æ ¼å¼
- `src/tasks/taskSearch.ts` - æŒ‰æ—¥æœŸ/çŠ¶æ€è¿‡æ»¤ä»»åŠ¡
- `src/data-layer` - è´Ÿè´£ä»»åŠ¡ç¼“å­˜çš„ç®¡ç†

### ä»»åŠ¡æ ¼å¼å…¼å®¹æ€§

**Tasks æ ¼å¼ï¼ˆemojiï¼‰**ï¼š
```
- [x] ğŸ¯  ä»»åŠ¡å…¨æ ¼å¼ ğŸ”º ğŸ” every day â• 2026-01-15 ğŸ›« 2026-01-19 â³ 2026-01-17 ğŸ“… 2026-01-21 âœ… 2026-01-15
```

**Dataview æ ¼å¼ï¼ˆfieldï¼‰**ï¼š
```
- [x] ğŸ¯  dataviewä»»åŠ¡æ ¼å¼  [priority:: highest]  [repeat:: every day]  [created:: 2026-01-15]  [start:: 2026-01-16]  [scheduled:: 2026-01-16]  [due:: 2026-01-15]  [completion:: 2026-01-15]
```

ä¼˜å…ˆçº§ï¼š`ğŸ”º`ï¼ˆæœ€é«˜ï¼‰ã€`â«`ï¼ˆé«˜ï¼‰ã€`ğŸ”¼`ï¼ˆä¸­ï¼‰ã€`ğŸ”½`ï¼ˆä½ï¼‰ã€`â¬`ï¼ˆæœ€ä½ï¼‰
æ—¥æœŸ emojiï¼š`â•`ï¼ˆåˆ›å»ºæ—¥æœŸï¼‰ã€`ğŸ›«`ï¼ˆå¼€å§‹æ—¥æœŸï¼‰ã€`â³`ï¼ˆè®¡åˆ’æ—¥æœŸï¼‰ã€`ğŸ“…`ï¼ˆåˆ°æœŸæ—¥æœŸï¼‰ã€`âœ…`ï¼ˆå®Œæˆæ—¥æœŸï¼‰ã€`âŒ`ï¼ˆå–æ¶ˆæ—¥æœŸï¼‰
é‡å¤ä»»åŠ¡: `ğŸ”` every day

## ä»£ç ç»Ÿä¸€ç®¡ç†è§„èŒƒ
DOMç±»åç»Ÿä¸€ä½¿ç”¨ ./src/utils/bem.ts è¿›è¡Œç®¡ç†, æ–°å»ºç±»åéœ€åœ¨æ­¤æ–‡ä»¶ä¸­è¿›è¡Œå®šä¹‰å¹¶å¼•ç”¨
ä¿®æ”¹DOMç»“æ„æˆ–è€…æ ·å¼ä¹‹å‰,è¯·å…ˆæ£€æŸ¥æ˜¯å¦æœ‰ç›¸å…³çš„æ—§ç±»æœªç§»é™¤,ç§»é™¤æœªä½¿ç”¨çš„æ—§ç±».
æ­£åˆ™è¡¨è¾¾å¼ç»Ÿä¸€ä½¿ç”¨ ./src/utils/RegularExpression.ts è¿›è¡Œç®¡ç†.
å…¨å±€ä»»åŠ¡æ‚¬æµ®çª—ç»Ÿä¸€å¤ç”¨ ./src/utils/tooltipManager.ts
ä»»åŠ¡æ¡ç›®æ›´æ–°ç»Ÿä¸€å¤ç”¨ updateTaskPropertieså‡½æ•°è¿›è¡Œ.

## Git æäº¤è§„èŒƒ

**é‡è¦è§„åˆ™**ï¼š
- âŒ **ç¦æ­¢è‡ªåŠ¨æäº¤**ï¼šå®Œæˆä»£ç ä¿®æ”¹åï¼Œä¸è¦è‡ªåŠ¨æ‰§è¡Œ `git commit` æˆ– `git push`
- âœ… **ç­‰å¾…ç”¨æˆ·æŒ‡ç¤º**ï¼šä»…å½“ç”¨æˆ·æ˜ç¡®è¦æ±‚æäº¤æ—¶ï¼Œæ‰æ‰§è¡Œ Git æäº¤æ“ä½œ
- âœ… **å¯ä»¥è¿è¡Œæ„å»º**ï¼šä¿®æ”¹ä»£ç åå¯ä»¥è¿è¡Œ `npm run build` è¿›è¡ŒéªŒè¯
- âœ… **å¯ä»¥æŸ¥çœ‹çŠ¶æ€**ï¼šå¯ä»¥ä½¿ç”¨ `git status`ã€`git diff` ç­‰å‘½ä»¤æŸ¥çœ‹ä¿®æ”¹çŠ¶æ€

## Windows ç‰¹æ®Šæ–‡ä»¶åæ³¨æ„äº‹é¡¹

**é¿å…åˆ›å»ºä¿ç•™è®¾å¤‡åæ–‡ä»¶**ï¼š

åœ¨ Windows ç¯å¢ƒä¸‹ï¼Œä»¥ä¸‹åç§°æ˜¯ç³»ç»Ÿä¿ç•™çš„è®¾å¤‡åï¼Œä¸åº”ä½œä¸ºæ–‡ä»¶åä½¿ç”¨ï¼š
- `NUL` - ç©ºè®¾å¤‡
- `CON` - æ§åˆ¶å°
- `PRN` - æ‰“å°æœº
- `AUX` - è¾…åŠ©è®¾å¤‡
- `COM1-9` - ä¸²å£
- `LPT1-9` - å¹¶å£

**é—®é¢˜åŸå› **ï¼š
åœ¨ Git Bash ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ `2>nul` æˆ–ç±»ä¼¼çš„è¾“å‡ºé‡å®šå‘è¯­æ³•æ—¶ï¼Œå¯èƒ½ä¼šæ„å¤–åˆ›å»ºåä¸º `nul` çš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯é‡å®šå‘åˆ°ç©ºè®¾å¤‡ã€‚

**é¿å…æ–¹å¼**ï¼š
```bash
# âŒ é”™è¯¯ï¼šå¯èƒ½åœ¨ Windows Git Bash ä¸­åˆ›å»º nul æ–‡ä»¶
dir "path" 2>nul | findstr "pattern"

# âœ… æ­£ç¡®ï¼šä½¿ç”¨ /dev/nullï¼ˆGit Bash å…¼å®¹ï¼‰
dir "path" 2>/dev/null | findstr "pattern"

# âœ… æ­£ç¡®ï¼šç›´æ¥ä½¿ç”¨ Bash åŸç”Ÿå‘½ä»¤
find "path" -name "*pattern*"

# âœ… æ­£ç¡®ï¼šä½¿ç”¨ Glob å·¥å…·ä»£æ›¿ bash å‘½ä»¤
```

**å¦‚æœæ„å¤–åˆ›å»ºäº†æ­¤ç±»æ–‡ä»¶**ï¼š
```bash
# ä½¿ç”¨ Git Bash çš„ rm å‘½ä»¤åˆ é™¤
rm -f nul
```
